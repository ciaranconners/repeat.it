<!DOCTYPE html>
<html>
<head>
  <title>Flashcards!</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

  <!-- Bootstrap requires jQuery for some things -->
  <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


  <link rel="stylesheet" type="text/css" href="styles/styles.css">
  <link href="https://fonts.googleapis.com/css?family=Permanent+Marker|Raleway" rel="stylesheet">
  <base href="/">
</head>

<body ng-app="flash-card">

  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#my-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a id="logo" class="navbar-brand" href="/app">Repeat.io</a>
      </div>

      <div class="collapse navbar-collapse" id="my-navbar">
        <ul class="nav navbar-nav navbar-right">
          <li><a id="home-btn" href="/app">Home</a></li>
          <li><a id="create-btn" href="/create">Create a deck</a></li>
          <li><a id="logout-btn" href="/">Log out</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div ng-view></div>

  <script type="text/javascript">
    // This function causes the menu to collapse correctly
    // on small screens
    $().ready(function() {
      $(".navbar-collapse a").click(function(){
        $(".navbar-collapse").collapse("hide");
      });
      localStorage.clear();
    });
    //listeners for global navigation buttons:
    var warning = 'You\'re not logged in, but feel free to play around. Decks you create will not be saved to your account. Instead, they will be available publicly to all unregistered users.';
    var serverURL = 'http://localhost:3000/decks';
    var serverCall = function(callback) {
      $.ajax({
        url: serverURL,
        type: 'GET',
        data: {
          username: 'null'
        },
        success: function(data) {
          callback(data);
        }
      });
    };

    $('#logo').on('click', function() {
      if (localStorage.length === 0) {
        alert(warning);
        serverCall(function(data) {
          console.log('inside serverCall', data);
          localStorage.setItem('decks', JSON.stringify(data));
        });
      }
    });
    $('#home-btn').on('click', function() {
      if (localStorage.length === 0) {
        alert(warning);
        serverCall(function(data) {
          console.log('inside serverCall', data);
          localStorage.setItem('decks', JSON.stringify(data));
        });
      }
    });
    $('#create-btn').on('click', function() {
      if (localStorage.length === 0) {
        alert(warning);
        serverCall(function(data) {
          console.log('inside serverCall', data);
          localStorage.setItem('decks', JSON.stringify(data));
        });
      }
    });
    $('#logout-btn').on('click', function() {
      localStorage.clear();
    });
  </script>

  <script src="./index.js" ></script>
  <script src="./components/app.js" ></script>
  <script src="./components/login.js"></script>
  <script src="./components/createPage.js"></script>
  <script src="./components/editPage.js"></script>
  <script src="./components/studyPage.js"></script>
</body>
</html>



